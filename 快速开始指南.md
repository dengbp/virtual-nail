# Reference-Only ç¾ç”²è¿ç§» - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ ä¸€é”®å®‰è£…ï¼ˆæ¨èï¼‰

### 1. è¿è¡Œè‡ªåŠ¨å®‰è£…è„šæœ¬
```bash
python auto_install_reference_only.py
```

è¿™ä¸ªè„šæœ¬ä¼š**æ™ºèƒ½æ£€æµ‹**ç°æœ‰ç¯å¢ƒå¹¶è‡ªåŠ¨ï¼š
- âœ… æ£€æŸ¥Pythonç‰ˆæœ¬å’ŒGit
- âœ… **æ™ºèƒ½æ£€æµ‹ç°æœ‰WebUIç¯å¢ƒ**ï¼ˆé¿å…é‡å¤å®‰è£…ï¼‰
- âœ… **æ™ºèƒ½æ£€æµ‹ç°æœ‰æ¨¡å‹**ï¼ˆSDXLã€Cannyã€Depthç­‰ï¼‰
- âœ… å®‰è£…Pythonä¾èµ–åŒ…
- âœ… å®‰è£…/æ›´æ–°ControlNetæ‰©å±•
- âœ… åªä¸‹è½½ç¼ºå¤±çš„æ¨¡å‹æ–‡ä»¶
- âœ… åˆ›å»ºå¯åŠ¨è„šæœ¬
- âœ… åˆ›å»ºæµ‹è¯•è„šæœ¬

### 2. æ™ºèƒ½ç¯å¢ƒæ£€æµ‹

è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹ï¼š
- **ç°æœ‰WebUI**ï¼šå½“å‰ç›®å½•ã€ä¸Šçº§ç›®å½•ã€ä¸Šä¸Šçº§ç›®å½•
- **ç°æœ‰æ¨¡å‹**ï¼š
  - åŸºç¡€æ¨¡å‹ï¼š`*.safetensors`, `*.ckpt`
  - ControlNetæ¨¡å‹ï¼š`*.pth`
  - ç‰¹åˆ«æ£€æµ‹Cannyã€Depthç­‰å¸¸ç”¨æ¨¡å‹
- **ç°æœ‰æ‰©å±•**ï¼šControlNetæ‰©å±•

**å¦‚æœæ£€æµ‹åˆ°ç°æœ‰ç¯å¢ƒï¼Œè„šæœ¬ä¼šï¼š**
- âœ… ä½¿ç”¨ç°æœ‰WebUIï¼Œä¸é‡å¤ä¸‹è½½
- âœ… è·³è¿‡å·²å­˜åœ¨çš„æ¨¡å‹ï¼Œåªä¸‹è½½ç¼ºå¤±çš„
- âœ… æ›´æ–°ControlNetæ‰©å±•åˆ°æœ€æ–°ç‰ˆæœ¬

### 3. æ¨¡å‹æ–‡ä»¶å¤„ç†

#### è‡ªåŠ¨æ£€æµ‹ç»“æœ
è„šæœ¬ä¼šæ˜¾ç¤ºç±»ä¼¼è¿™æ ·çš„ä¿¡æ¯ï¼š
```
âœ… å‘ç°ç°æœ‰WebUI: D:\stable-diffusion-webui
âœ… å‘ç°ControlNetæ‰©å±•: D:\stable-diffusion-webui\extensions\sd-webui-controlnet
âœ… å‘ç°åŸºç¡€æ¨¡å‹: 3 ä¸ª
   - sd_xl_base_1.0.safetensors
   - v1-5-pruned.safetensors
   - dreamshaper_8.safetensors
âœ… å‘ç°ControlNetæ¨¡å‹: 5 ä¸ª
   - control_v11p_sd15_canny.pth
   - control_v11p_sd15_depth.pth
   - control_v11p_sd15_softedge.pth
   - control_v11p_sd15_openpose.pth
   - control_v11p_sd15_mlsd.pth
```

#### åªä¸‹è½½ç¼ºå¤±æ¨¡å‹
å¦‚æœæ£€æµ‹åˆ°ç¼ºå°‘å¿…è¦æ¨¡å‹ï¼Œè„šæœ¬ä¼šï¼š
1. æ˜¾ç¤ºç¼ºå¤±çš„æ¨¡å‹åˆ—è¡¨
2. è¯¢é—®æ˜¯å¦è‡ªåŠ¨ä¸‹è½½
3. åªä¸‹è½½ç¼ºå¤±çš„æ¨¡å‹ï¼Œä¸é‡å¤ä¸‹è½½å·²æœ‰çš„

### 4. å¯åŠ¨WebUI
```bash
# Windows
åŒå‡» start_webui.bat

# Linux/Mac
./start_webui.sh
```

### 5. æµ‹è¯•å®‰è£…
```bash
python quick_test.py
```

## ğŸ“ æ–‡ä»¶ç»“æ„
å®‰è£…å®Œæˆåï¼Œä½ çš„ç›®å½•ç»“æ„å¯èƒ½æ˜¯ï¼š
```
nail-color-preview/
â”œâ”€â”€ auto_install_reference_only.py    # è‡ªåŠ¨å®‰è£…è„šæœ¬
â”œâ”€â”€ nail_reference_only_transfer.py   # ä¸»è¦è¿ç§»è„šæœ¬
â”œâ”€â”€ test_reference_only_transfer.py   # å®Œæ•´æµ‹è¯•è„šæœ¬
â”œâ”€â”€ quick_test.py                     # å¿«é€Ÿæµ‹è¯•è„šæœ¬
â”œâ”€â”€ start_webui.bat                   # Windowså¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_webui.sh                    # Linux/Macå¯åŠ¨è„šæœ¬
â”œâ”€â”€ stable-diffusion-webui/           # WebUIç›®å½•ï¼ˆå¦‚æœæ–°å»ºï¼‰
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ Stable-diffusion/
â”‚   â”‚   â”‚   â””â”€â”€ v1-5-pruned.safetensors
â”‚   â”‚   â””â”€â”€ ControlNet/
â”‚   â”‚       â””â”€â”€ control_v11p_sd15_canny.pth
â”‚   â””â”€â”€ extensions/
â”‚       â””â”€â”€ sd-webui-controlnet/
â””â”€â”€ data/                             # æµ‹è¯•å›¾åƒç›®å½•
    â”œâ”€â”€ hand_photo.jpg
    â””â”€â”€ nail_sample.jpg
```

**æˆ–è€…ä½¿ç”¨ç°æœ‰WebUI**ï¼š
```
your-existing-webui/                  # ç°æœ‰WebUIç›®å½•
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ Stable-diffusion/
â”‚   â”‚   â”œâ”€â”€ sd_xl_base_1.0.safetensors    # å·²æœ‰
â”‚   â”‚   â”œâ”€â”€ v1-5-pruned.safetensors       # å·²æœ‰
â”‚   â”‚   â””â”€â”€ dreamshaper_8.safetensors     # å·²æœ‰
â”‚   â””â”€â”€ ControlNet/
â”‚       â”œâ”€â”€ control_v11p_sd15_canny.pth   # å·²æœ‰
â”‚       â”œâ”€â”€ control_v11p_sd15_depth.pth   # å·²æœ‰
â”‚       â””â”€â”€ control_v11p_sd15_softedge.pth # å·²æœ‰
â””â”€â”€ extensions/
    â””â”€â”€ sd-webui-controlnet/              # è‡ªåŠ¨æ›´æ–°

nail-color-preview/                   # é¡¹ç›®ç›®å½•
â”œâ”€â”€ auto_install_reference_only.py
â”œâ”€â”€ nail_reference_only_transfer.py
â”œâ”€â”€ start_webui.bat                   # æŒ‡å‘ç°æœ‰WebUI
â””â”€â”€ ...
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨
```python
from nail_reference_only_transfer import NailReferenceOnlyTransfer

# åˆå§‹åŒ–
transfer = NailReferenceOnlyTransfer()

# æ‰§è¡Œè¿ç§»
result = transfer.process_nail_transfer(
    hand_image_path="ä½ çš„æ‰‹éƒ¨ç…§ç‰‡.jpg",
    nail_sample_path="æŒ‡ç”²æ ·æ¿.jpg",
    output_path="ç»“æœ.jpg"
)
```

### å‚æ•°è°ƒä¼˜
```python
result = transfer.transfer_with_reference_only(
    hand_image=hand_image,
    nail_sample=nail_sample,
    mask=mask,
    strength=0.8,        # Reference-Onlyå¼ºåº¦
    cfg_scale=7.0,       # CFGæ¯”ä¾‹
    steps=20             # æ¨ç†æ­¥æ•°
)
```

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: è„šæœ¬æ£€æµ‹ä¸åˆ°æˆ‘çš„ç°æœ‰WebUIï¼Ÿ
**A**: è„šæœ¬ä¼šæ£€æŸ¥ä»¥ä¸‹ä½ç½®ï¼š
1. å½“å‰ç›®å½•ä¸‹çš„ `stable-diffusion-webui`
2. ä¸Šçº§ç›®å½•ä¸‹çš„ `stable-diffusion-webui`
3. ä¸Šä¸Šçº§ç›®å½•ä¸‹çš„ `stable-diffusion-webui`

å¦‚æœéƒ½ä¸åœ¨ï¼Œå¯ä»¥æ‰‹åŠ¨æŒ‡å®šè·¯å¾„æˆ–è®©è„šæœ¬æ–°å»ºä¸€ä¸ªã€‚

### Q: è„šæœ¬é‡å¤ä¸‹è½½äº†å·²æœ‰çš„æ¨¡å‹ï¼Ÿ
**A**: è„šæœ¬ä¼šæ™ºèƒ½æ£€æµ‹ç°æœ‰æ¨¡å‹ï¼Œåªä¸‹è½½ç¼ºå¤±çš„ã€‚å¦‚æœå‡ºç°é‡å¤ä¸‹è½½ï¼Œå¯èƒ½æ˜¯ï¼š
1. æ¨¡å‹æ–‡ä»¶åä¸æ ‡å‡†
2. æ¨¡å‹æ–‡ä»¶æŸå
3. æ£€æµ‹é€»è¾‘æœ‰è¯¯

### Q: å®‰è£…è„šæœ¬è¿è¡Œå¤±è´¥ï¼Ÿ
**A**: æ£€æŸ¥ï¼š
1. Pythonç‰ˆæœ¬ â‰¥ 3.8
2. Gitå·²å®‰è£…
3. ç½‘ç»œè¿æ¥æ­£å¸¸
4. ç£ç›˜ç©ºé—´å……è¶³

### Q: æ¨¡å‹æ–‡ä»¶ä¸‹è½½å¤±è´¥ï¼Ÿ
**A**: 
1. ä½¿ç”¨VPNæˆ–ä»£ç†
2. æ‰‹åŠ¨ä¸‹è½½å¹¶æ”¾ç½®åˆ°æ­£ç¡®ç›®å½•
3. æ£€æŸ¥ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³

### Q: WebUIå¯åŠ¨å¤±è´¥ï¼Ÿ
**A**: 
1. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦åœ¨æ­£ç¡®ä½ç½®
2. ç¡®è®¤ç«¯å£7860æœªè¢«å ç”¨
3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—

### Q: APIè¿æ¥å¤±è´¥ï¼Ÿ
**A**: 
1. ç¡®ä¿WebUIæ­£åœ¨è¿è¡Œ
2. æ£€æŸ¥å¯åŠ¨å‚æ•°æ˜¯å¦åŒ…å«`--api`
3. ç¡®è®¤ControlNetæ‰©å±•å·²æ­£ç¡®å®‰è£…

## ğŸ“Š æ€§èƒ½è¦æ±‚

### æœ€ä½é…ç½®
- **æ˜¾å¡**ï¼šNVIDIA 6GBæ˜¾å­˜
- **å†…å­˜**ï¼š16GB RAM
- **å­˜å‚¨**ï¼š10GBå¯ç”¨ç©ºé—´

### æ¨èé…ç½®
- **æ˜¾å¡**ï¼šNVIDIA 8GB+æ˜¾å­˜
- **å†…å­˜**ï¼š32GB RAM
- **å­˜å‚¨**ï¼š20GBå¯ç”¨ç©ºé—´

## ğŸ¨ æ•ˆæœé¢„è§ˆ

ä½¿ç”¨Reference-Onlyé¢„å¤„ç†å™¨å¯ä»¥è·å¾—ï¼š
- âœ… æ›´è‡ªç„¶çš„é¢œè‰²è¿ç§»
- âœ… æ›´å¥½çš„çº¹ç†ä¿æŒ
- âœ… å‡å°‘åå¤„ç†æ­¥éª¤
- âœ… æ›´é«˜çš„ç”Ÿæˆè´¨é‡

## ğŸš€ æ™ºèƒ½æ£€æµ‹ä¼˜åŠ¿

### èŠ‚çœæ—¶é—´
- ä¸é‡å¤ä¸‹è½½å·²æœ‰æ¨¡å‹
- ä¸é‡å¤å®‰è£…å·²æœ‰è½¯ä»¶
- åªæ›´æ–°å¿…è¦çš„ç»„ä»¶

### èŠ‚çœç©ºé—´
- å¤ç”¨ç°æœ‰WebUIç¯å¢ƒ
- å¤ç”¨ç°æœ‰æ¨¡å‹æ–‡ä»¶
- é¿å…é‡å¤å­˜å‚¨

### å…¼å®¹æ€§å¥½
- æ”¯æŒå¤šç§WebUIä½ç½®
- æ”¯æŒå¤šç§æ¨¡å‹æ ¼å¼
- è‡ªåŠ¨é€‚é…ç°æœ‰ç¯å¢ƒ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„å¸¸è§é—®é¢˜éƒ¨åˆ†
2. è¿è¡Œ`python quick_test.py`è¯Šæ–­
3. æ£€æŸ¥æ—¥å¿—æ–‡ä»¶
4. æäº¤Issueåˆ°é¡¹ç›®ä»“åº“

---

**å¼€å§‹ä½¿ç”¨**ï¼šè¿è¡Œ `python auto_install_reference_only.py` å¼€å§‹æ™ºèƒ½å®‰è£…ï¼ 